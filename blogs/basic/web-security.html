<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Web å¼€å‘çš„å®‰å…¨ä¹‹æ—… | FeliksLvçš„åšå®¢</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.png">
    <meta name="description" content="è®°å½•å­¦ä¹ è¿‡ç¨‹ï¼Œåˆ†äº«ç”Ÿæ´»çç¢ã€‚">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.9d8bef43.css" as="style"><link rel="preload" href="/assets/js/app.919d6661.js" as="script"><link rel="preload" href="/assets/js/7.5aa8e1b9.js" as="script"><link rel="preload" href="/assets/js/2.46317bd9.js" as="script"><link rel="preload" href="/assets/js/1.57079a2a.js" as="script"><link rel="preload" href="/assets/js/31.f98198e9.js" as="script"><link rel="prefetch" href="/assets/js/10.7fc491ea.js"><link rel="prefetch" href="/assets/js/11.d111491f.js"><link rel="prefetch" href="/assets/js/14.840e41be.js"><link rel="prefetch" href="/assets/js/15.b3cdf2b1.js"><link rel="prefetch" href="/assets/js/16.fc8d0ab6.js"><link rel="prefetch" href="/assets/js/17.72bfffc9.js"><link rel="prefetch" href="/assets/js/18.514e76b3.js"><link rel="prefetch" href="/assets/js/19.3fd8c814.js"><link rel="prefetch" href="/assets/js/20.2e41d20d.js"><link rel="prefetch" href="/assets/js/21.5b25527b.js"><link rel="prefetch" href="/assets/js/22.a717549c.js"><link rel="prefetch" href="/assets/js/23.b37c3dac.js"><link rel="prefetch" href="/assets/js/24.b59423b7.js"><link rel="prefetch" href="/assets/js/25.5e852821.js"><link rel="prefetch" href="/assets/js/26.d74df0db.js"><link rel="prefetch" href="/assets/js/27.482fea2c.js"><link rel="prefetch" href="/assets/js/28.9410d2dc.js"><link rel="prefetch" href="/assets/js/29.26c2a1a1.js"><link rel="prefetch" href="/assets/js/3.de569e7b.js"><link rel="prefetch" href="/assets/js/30.bda763c6.js"><link rel="prefetch" href="/assets/js/32.09468acb.js"><link rel="prefetch" href="/assets/js/33.6bff03c3.js"><link rel="prefetch" href="/assets/js/34.edff19f2.js"><link rel="prefetch" href="/assets/js/35.f3fda163.js"><link rel="prefetch" href="/assets/js/36.288dcf73.js"><link rel="prefetch" href="/assets/js/37.1ac06ffd.js"><link rel="prefetch" href="/assets/js/38.ae76a2f2.js"><link rel="prefetch" href="/assets/js/39.d98d9b39.js"><link rel="prefetch" href="/assets/js/4.c4a61988.js"><link rel="prefetch" href="/assets/js/40.f8126f11.js"><link rel="prefetch" href="/assets/js/41.756b01e9.js"><link rel="prefetch" href="/assets/js/42.a45fb273.js"><link rel="prefetch" href="/assets/js/43.0f06de4d.js"><link rel="prefetch" href="/assets/js/44.2cb104af.js"><link rel="prefetch" href="/assets/js/45.295815fd.js"><link rel="prefetch" href="/assets/js/46.4a958c55.js"><link rel="prefetch" href="/assets/js/47.cc61a05b.js"><link rel="prefetch" href="/assets/js/48.58021ccc.js"><link rel="prefetch" href="/assets/js/49.495e04eb.js"><link rel="prefetch" href="/assets/js/5.bafa66ed.js"><link rel="prefetch" href="/assets/js/50.0ba72f8e.js"><link rel="prefetch" href="/assets/js/51.f01ff3d0.js"><link rel="prefetch" href="/assets/js/52.24b95130.js"><link rel="prefetch" href="/assets/js/53.c2f99ba6.js"><link rel="prefetch" href="/assets/js/54.d8c53428.js"><link rel="prefetch" href="/assets/js/55.f288b8ba.js"><link rel="prefetch" href="/assets/js/56.fe0c77f6.js"><link rel="prefetch" href="/assets/js/57.a41bae1d.js"><link rel="prefetch" href="/assets/js/58.ca6fe63c.js"><link rel="prefetch" href="/assets/js/59.265386a9.js"><link rel="prefetch" href="/assets/js/6.130b86a1.js"><link rel="prefetch" href="/assets/js/60.67e4b1a0.js"><link rel="prefetch" href="/assets/js/61.43b876fa.js"><link rel="prefetch" href="/assets/js/62.f9a6351a.js"><link rel="prefetch" href="/assets/js/63.085930e7.js"><link rel="prefetch" href="/assets/js/64.019d06db.js"><link rel="prefetch" href="/assets/js/65.192f99be.js"><link rel="prefetch" href="/assets/js/66.6f0b195f.js"><link rel="prefetch" href="/assets/js/67.cd9f2f08.js"><link rel="prefetch" href="/assets/js/68.6834d557.js"><link rel="prefetch" href="/assets/js/69.ef5cf8c4.js"><link rel="prefetch" href="/assets/js/70.7f33b94e.js"><link rel="prefetch" href="/assets/js/71.4f6f8ac5.js"><link rel="prefetch" href="/assets/js/72.46080b15.js"><link rel="prefetch" href="/assets/js/73.1da5fdd4.js"><link rel="prefetch" href="/assets/js/74.fb18f390.js"><link rel="prefetch" href="/assets/js/75.42184a99.js"><link rel="prefetch" href="/assets/js/76.4e138b3c.js"><link rel="prefetch" href="/assets/js/77.d82bd0d7.js"><link rel="prefetch" href="/assets/js/78.46fe81a9.js"><link rel="prefetch" href="/assets/js/79.d8d6ae10.js"><link rel="prefetch" href="/assets/js/8.d2718ab9.js"><link rel="prefetch" href="/assets/js/80.76c8bdc2.js"><link rel="prefetch" href="/assets/js/81.e93fd370.js"><link rel="prefetch" href="/assets/js/82.8f04ec41.js"><link rel="prefetch" href="/assets/js/83.2269fe3e.js"><link rel="prefetch" href="/assets/js/84.154c626f.js"><link rel="prefetch" href="/assets/js/9.378d1dd2.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.e07e82db.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9d8bef43.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>FeliksLvçš„åšå®¢</h3> <p class="description" data-v-59e6cb88>è®°å½•å­¦ä¹ è¿‡ç¨‹ï¼Œåˆ†äº«ç”Ÿæ´»çç¢ã€‚</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>FeliksLv</span>
        Â Â 
        <span data-v-59e6cb88>2019 - </span>
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="FeliksLvçš„åšå®¢" class="logo"> <span class="site-name">FeliksLvçš„åšå®¢</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/åç«¯/" class="nav-link"><i class="undefined"></i>
  åç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/å…¬å…±åŸºç¡€/" class="nav-link"><i class="undefined"></i>
  å…¬å…±åŸºç¡€
</a></li><li class="dropdown-item"><!----> <a href="/categories/å®¢æˆ·ç«¯/" class="nav-link"><i class="undefined"></i>
  å®¢æˆ·ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/å‰ç«¯/" class="nav-link"><i class="undefined"></i>
  å‰ç«¯
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  æ ‡ç­¾
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´çº¿
</a></div><div class="nav-item"><a href="/others/about.html" class="nav-link"><i class="iconfont reco-account"></i>
  å…³äº
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    FeliksLv
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>34</h3> <h6 data-v-1fad0c41>æ–‡ç« </h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>19</h3> <h6 data-v-1fad0c41>æ ‡ç­¾</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/åç«¯/" class="nav-link"><i class="undefined"></i>
  åç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/å…¬å…±åŸºç¡€/" class="nav-link"><i class="undefined"></i>
  å…¬å…±åŸºç¡€
</a></li><li class="dropdown-item"><!----> <a href="/categories/å®¢æˆ·ç«¯/" class="nav-link"><i class="undefined"></i>
  å®¢æˆ·ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/å‰ç«¯/" class="nav-link"><i class="undefined"></i>
  å‰ç«¯
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  æ ‡ç­¾
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´çº¿
</a></div><div class="nav-item"><a href="/others/about.html" class="nav-link"><i class="iconfont reco-account"></i>
  å…³äº
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Web å¼€å‘çš„å®‰å…¨ä¹‹æ—…</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>FeliksLv</span>
        Â Â 
        <span data-v-59e6cb88>2019 - </span>
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Web å¼€å‘çš„å®‰å…¨ä¹‹æ—…</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>FeliksLv</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2021/8/22</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>Web</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="cross-site-scripting-xss"><a href="#cross-site-scripting-xss" class="header-anchor">#</a> Cross-Site Scripting(XSS)</h2> <p>è·¨ç«™è„šæœ¬æ”»å‡»ï¼ŒæŒ‡æ”»å‡»è€…å°†æ¶æ„è„šæœ¬æ’å…¥åˆ°é¡µé¢ä¸­è¿›è¡Œæ‰§è¡Œã€‚</p> <p>åŸå› ï¼š</p> <ul><li>å¼€å‘è€…ç›²ç›®ä¿¡ä»»ç”¨æˆ·æäº¤çš„å†…å®¹</li> <li>ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²ç”Ÿæˆ dom</li></ul> <p>ç‰¹ç‚¹ï¼š</p> <ul><li>é€šå¸¸éš¾ä»¥ä» UI ä¸Šæ„ŸçŸ¥ï¼ˆæš—åœ°æ‰§è¡Œè„šæœ¬ï¼‰</li> <li>çªƒå–ç”¨æˆ·ä¿¡æ¯ï¼ˆcookie/tokenï¼‰</li> <li>ç»˜åˆ¶ UIï¼ˆä¾‹å¦‚å¼¹çª—ï¼‰ï¼Œè¯±éª—ç”¨æˆ·ç‚¹å‡»/å¡«å†™è¡¨å•</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> content<span class="token punctuation">,</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
  <span class="token comment">// æ²¡æœ‰å¯¹cententè¿›è¡Œæ ¡éªŒ</span>
  <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    content<span class="token punctuation">,</span>
    id
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> content <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> ctx<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ²¡æœ‰å¯¹ centent è¿‡æ»¤</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>æ”»å‡»è€…å¯ä»¥æäº¤ä»¥ä¸‹ä»£ç ï¼Œæ¥å®ç°XSSæ”»å‡»</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/submit'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">body</span><span class="token operator">:</span> Json<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;script&gt;alert(&quot;xss&quot;);&lt;/script&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="stored-xss"><a href="#stored-xss" class="header-anchor">#</a> Stored XSS</h3> <ul><li>æ¶æ„è„šæœ¬è¢«å­˜åœ¨æ•°æ®åº“ä¸­</li> <li>è®¿é—®é¡µé¢ -&gt; è¯»æ•°æ® === è¢«æ”»å‡»</li> <li>å±å®³æœ€å¤§ï¼Œå¯¹å…¨éƒ¨ç”¨æˆ·å¯è§</li></ul> <p>ä¸¾ä¸ªä¾‹å­ï¼šå‡å¦‚çˆ±å¥‡è‰ºå—åˆ°äº† xss æ”»å‡»ï¼Œä½ çš„ç”¨æˆ·åå’Œå¯†ç å°±æœ‰å¯èƒ½è¢«çªƒå–ï¼Œä»æ­¤ç”µå•†ç½‘ç«™ä¸Šå°±å¤šäº†ä¸€ä¸ªå…±äº«è´¦æˆ·ã€‚</p> <h3 id="reflected-xss"><a href="#reflected-xss" class="header-anchor">#</a> Reflected XSS</h3> <ul><li>ä¸æ¶‰åŠæ•°æ®åº“</li> <li>ä» URL ä¸Šæ”»å‡»ï¼Œæ³¨å…¥åœ¨æœåŠ¡ç«¯å®Œæˆ</li></ul> <p>ä¸¾ä¸ªä¾‹å­ï¼š</p> <p>æœ‰è¿™æ ·ä¸€ä¸ª URL <code>host/path/?param=&lt;script&gt;alert('123')&lt;/script&gt;</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> param <span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>param<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="dom-based-xss"><a href="#dom-based-xss" class="header-anchor">#</a> DOM-based XSS</h3> <ul><li>ä¸éœ€è¦æœåŠ¡å™¨çš„å‚ä¸</li> <li>å‘èµ·å’Œæ‰§è¡Œï¼Œå…¨åœ¨æµè§ˆå™¨å®Œæˆ</li></ul> <p>URL <code>host/path/?param=&lt;script&gt;alert('123')&lt;/script&gt;</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'params'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ğŸ˜ˆğŸ˜ˆ æ¶æ„è„šæœ¬æ³¨å…¥</span>
div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> content<span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="mutation-based-xss"><a href="#mutation-based-xss" class="header-anchor">#</a> Mutation-based XSS</h3> <ul><li>åˆ©ç”¨äº†æµè§ˆå™¨æ¸²æŸ“ DOM çš„ç‰¹æ€§ï¼ˆç‹¬ç‰¹ä¼˜åŒ–ï¼‰</li> <li>ä¸åŒæµè§ˆå™¨ï¼Œä¼šæœ‰åŒºåˆ«ï¼ˆæŒ‰æµè§ˆå™¨è¿›è¡Œæ”»å‡»ï¼‰</li></ul> <p>ä¸‹é¢ä»£ç ä¼šè¢«éƒ¨åˆ†æµè§ˆå™¨ä¼˜åŒ–
<code>&lt;noscript&gt;&lt;p title=&quot;&lt;/noscript&gt;&lt;img src=x onerror=alert(1)&quot;&gt;</code></p> <p>ä»è€Œå˜æˆ</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>noscript</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>
&lt;/noscript&gt;
&lt;image src=<span class="token punctuation">&quot;</span></span><span class="token attr-name">x&quot;</span> <span class="token special-attr"><span class="token attr-name">onerror</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
  &quot;&quot;&gt;&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="é˜²å¾¡xss"><a href="#é˜²å¾¡xss" class="header-anchor">#</a> é˜²å¾¡XSS</h3> <ul><li>æ°¸è¿œä¸è¦ç›¸ä¿¡ç”¨æˆ·çš„æäº¤ä¿¡æ¯</li> <li>ä¸è¦å°†ç”¨æˆ·æäº¤çš„å†…å®¹ç›´æ¥è½¬æ¢æˆDOM</li></ul> <p>å‰ç«¯ï¼š</p> <ul><li>ä¸»æµæ¡†æ¶é»˜è®¤é˜²å¾¡XSS</li> <li>google-closure-library</li></ul> <p>æœåŠ¡ç«¯ï¼ˆNodeï¼‰</p> <ul><li>DOMPurify</li></ul> <p>ä»è¦æ³¨æ„ä¸€ä¸‹éƒ¨åˆ†ï¼š</p> <ul><li>string -&gt; DOM</li> <li>ä¸Šä¼ SVG</li> <li>è‡ªå®šä¹‰è·³è½¬é“¾æ¥</li> <li>è‡ªå®šä¹‰æ ·å¼ï¼ˆä¾‹å¦‚ï¼šbackground: url(xxx)ï¼‰</li></ul> <h2 id="cross-site-request-forgery-csrf"><a href="#cross-site-request-forgery-csrf" class="header-anchor">#</a> Cross-site request forgery(CSRF)</h2> <p>è·¨ç«™ä¼ªé€ è¯·æ±‚</p> <ul><li>åœ¨ç”¨æˆ·ä¸çŸ¥æƒ…çš„å‰æä¸‹</li> <li>åˆ©ç”¨ç”¨æˆ·çš„æƒé™ï¼ˆcookieï¼‰</li> <li>æ„é€ æŒ‡å®š HTTP è¯·æ±‚ï¼Œçªƒå–æˆ–ä¿®æ”¹ç”¨æˆ·æ•æ„Ÿä¿¡æ¯</li></ul> <p>ä¸»åŠ¨è¯·æ±‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://bank.com/transfer?to=hacker&amp;amount=100<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹æˆ‘æŠ½å¥–<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¢«åŠ¨è¯·æ±‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span> display:none;<span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://bank.com/transfer?to=hacker&amp;amount=100<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="same-origin-policy"><a href="#same-origin-policy" class="header-anchor">#</a> Same-origin Policy</h3> <p>HTTPè¯·æ±‚ï¼šåŒæºğŸ‘Œ</p> <ul><li>åè®®</li> <li>åŸŸå</li> <li>ç«¯å£</li></ul> <h3 id="content-security-policy-csp"><a href="#content-security-policy-csp" class="header-anchor">#</a> Content Security Policy(CSP)</h3> <ul><li>å“ªäº›æº(åŸŸå)è¢«è®¤ä¸ºæ˜¯å®‰å…¨çš„</li> <li>æ¥è‡ªå®‰å…¨æºçš„è„šæœ¬å¯ä»¥æ‰§è¡Œï¼Œå¦åˆ™ç›´æ¥æŠ›é”™</li> <li>å¯¹eval + inline scriptè¯´ ğŸš«</li></ul> <p>é€šè¿‡é…ç½®æœåŠ¡å™¨è¯·æ±‚å¤´éƒ¨</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Content-Security<span class="token operator">=</span>Policy: script-src <span class="token string">'self'</span> <span class="token comment">#åŒæº</span>
Content-Security<span class="token operator">=</span>Policy: script-src <span class="token string">'self'</span> https://domain.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æµè§ˆå™¨meta</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Content-Security-Policy<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script-src self<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="csrfçš„é˜²å¾¡"><a href="#csrfçš„é˜²å¾¡" class="header-anchor">#</a> CSRFçš„é˜²å¾¡</h3> <p>æ¨èåœ¨ä¸­é—´ä»¶ä¸­ï¼Œå¯¹csrfè¿›è¡Œç»Ÿä¸€å¤„ç†ï¼Œä¾‹å¦‚Spring Securityï¼Œå¯ä»¥å®šä¹‰è¯·æ±‚çš„fliterã€‚</p> <ul><li>é™åˆ¶è¯·æ±‚çš„Originå’ŒRefererï¼ˆåŒæºè¯·æ±‚ä¸­ï¼ŒGET+HEADä¸å‘é€Originéœ€è¦ç‰¹åˆ«å¤„ç†ï¼‰</li> <li>ä½¿ç”¨tokenï¼Œtokenå’Œç”¨æˆ·ç»‘å®šï¼Œè¦æœ‰è¿‡æœŸæ—¶é—´</li> <li>GET !== GET + POST å†™æ¥å£ä¸è¦å·æ‡’</li></ul> <h4 id="iframeæ”»å‡»"><a href="#iframeæ”»å‡»" class="header-anchor">#</a> iframeæ”»å‡»</h4> <p><img src="/assets/img/iframe.19653b88.png" alt="iframeæ”»å‡»"></p> <h4 id="samesite-cookie"><a href="#samesite-cookie" class="header-anchor">#</a> SameSite Cookie</h4> <p><img src="/assets/img/samesite-cookie.96f62e99.png" alt="SameSite Cookie"></p> <h2 id="injection"><a href="#injection" class="header-anchor">#</a> Injection</h2> <h3 id="sql-injection"><a href="#sql-injection" class="header-anchor">#</a> SQL Injection</h3> <p>è¯·æ±‚æºå¸¦sqlå‚æ•°ï¼ˆæ¶æ„æ³¨å…¥ï¼‰-&gt; serveræ‹¼æ¥å‚æ•°ï¼Œè¿è¡Œsql code -&gt; è·å–æ•°æ®ã€åˆ é™¤æ•°æ®ã€ä¿®æ”¹æ•°æ®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// è¯»å–è¯·æ±‚å­—æ®µï¼Œä»¥å­—ç¬¦ä¸²æ‹¼æ¥SQL</span>
<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">renderForm</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> username<span class="token punctuation">,</span> form_id <span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> sql<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    SELECT a, b, c FROM table
    WHERE username = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    AND form_id = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>form_id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token function">renderForm</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>æ”»å‡»è€…å¦‚æœæäº¤ä»¥ä¸‹ä»£ç ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;/api&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;applicaiton/json&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">&quot;any; DROP TABLE table;&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>è¿™å°±ä¼šå˜æˆä¸‹é¢çš„sqlè¯­å¥</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> XXX <span class="token keyword">FROM</span> XXX<span class="token punctuation">;</span> <span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">table</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ğŸ‰ï¼šè¢«åŠ¨åˆ åº“è·‘è·¯æˆå°±è¾¾æˆ âœ…</p> <h3 id="injection-ä¸è‡³äº-sql"><a href="#injection-ä¸è‡³äº-sql" class="header-anchor">#</a> Injection ä¸è‡³äº SQL</h3> <ul><li>CLI</li> <li>OS command</li> <li>Server-Side Request Forgery(SSRF)ï¼ŒæœåŠ¡ç«¯ä¼ªé€ è¯·æ±‚ï¼ˆä¸¥æ ¼æ¥è¯´SSRFä¸æ˜¯æ³¨å…¥ï¼Œä½†æ˜¯åŸç†ç±»ä¼¼ï¼‰</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">convertVideo</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> video<span class="token punctuation">,</span> options <span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
  <span class="token function">exec</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">convert-cli </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>video<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> -o </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>é‚£è¿™å°±å¾ˆå±é™©äº†ï¼Œæ¯”å¦‚ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;/api&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&amp;&amp; rm -rf xxx</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¿˜æœ‰ä¾‹å¦‚æœåŠ¡å™¨æš´éœ²äº†ä¸€äº›é‡è¦æ–‡ä»¶ï¼Œæ¯”å¦‚nginxçš„é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆæ”»å‡»è€…å°±å¯ä»¥å°†è¯·æ±‚ä¿®æ”¹æˆå‰å¾€ç¬¬ä¸‰æ–¹æœåŠ¡å™¨</p> <h4 id="ssrf-demo"><a href="#ssrf-demo" class="header-anchor">#</a> SSRF demo</h4> <p>è¯·æ±‚ç”¨æˆ·è‡ªå®šä¹‰çš„callback urlï¼Œä»è€Œå¯¼è‡´å†…ç½‘å†…å®¹çš„æ³„éœ²</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">webHook</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//callback å¯èƒ½æ˜¯å†…ç½‘url</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>query<span class="token punctuation">.</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="é˜²å¾¡injection"><a href="#é˜²å¾¡injection" class="header-anchor">#</a> é˜²å¾¡Injection</h3> <h4 id="sql"><a href="#sql" class="header-anchor">#</a> SQL</h4> <ul><li>æ‰¾åˆ°é¡¹ç›®ä¸­æŸ¥è¯¢ SQL çš„åœ°æ–¹</li> <li>ä½¿ç”¨ prepared statement</li></ul> <h4 id="beyond-sql"><a href="#beyond-sql" class="header-anchor">#</a> beyond SQL</h4> <ul><li>æœ€å°æƒé™åŸåˆ™ï¼šç¦æ­¢ sudo || root</li> <li>å»ºç«‹å…è®¸åå• + è¿‡æ»¤ ï¼š rm</li> <li>å¯¹ URL ç±»å‹å‚æ•°è¿›è¡Œåè®®ã€åŸŸåã€ipç­‰é™åˆ¶ï¼šç¦æ­¢è®¿é—®å†…ç½‘</li></ul> <h2 id="denial-of-service-dos"><a href="#denial-of-service-dos" class="header-anchor">#</a> Denial of Service(DoS)</h2> <blockquote><p>æœåŠ¡æ‹’ç»ï¼šé€šè¿‡æŸç§æ–¹å¼ï¼ˆæ„é€ ç‰¹å®šè¯·æ±‚ï¼‰ï¼Œå¯¼è‡´æœåŠ¡å™¨èµ„æºè¢«æ˜¾è‘—æ¶ˆè€—ï¼Œæ¥ä¸åŠå“åº”æ›´å¤šè¯·æ±‚ï¼Œå¯¼è‡´è¯·æ±‚æŒ¤å‹ï¼Œè¿›è€Œé›ªå´©æ•ˆåº”ã€‚</p></blockquote> <h3 id="redos-åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„-dos"><a href="#redos-åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„-dos" class="header-anchor">#</a> ReDoS: åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„ DoS</h3> <p>æ­£åˆ™è¡¨è¾¾å¼ï¼š <code>/^((ab)*)+$/</code>
å­—ç¬¦ä¸²ï¼š<code>abababababababa</code></p> <p>æœ«å°¾çš„aä¼šå¯¼è‡´ä¸æ–­è¿›è¡ŒåŒ¹é…ï¼Œä»è€Œä½¿å¾—å“åº”æ—¶é—´å¢åŠ ï¼Œæ¥å£ååé‡å‡å°‘ã€‚</p> <h3 id="distributed-dos-ddos"><a href="#distributed-dos-ddos" class="header-anchor">#</a> Distributed DoS(DDoS)</h3> <p>çŸ­æ—¶é—´å†…ï¼Œæ¥è‡ªå¤§é‡åƒµå°¸è®¾å¤‡çš„è¯·æ±‚æµé‡ï¼ŒæœåŠ¡å™¨ä¸èƒ½åŠæ—¶å®Œæˆå…¨éƒ¨è¯·æ±‚ï¼Œå¯¼è‡´è¯·æ±‚å †ç§¯ï¼Œè¿›è€Œé›ªå´©æ•ˆåº”ï¼Œæ— æ³•å“åº”æ–°è¯·æ±‚ã€‚</p> <p><strong>ã€Œä¸æå¤æ‚çš„ï¼Œé‡å¤§å°±å®Œäº‹å„¿äº†ã€</strong></p> <p>æ”»å‡»ç‰¹ç‚¹</p> <ul><li>ç›´æ¥è®¿é—® IP</li> <li>ä»»æ„ API</li> <li>æ¶ˆè€—å¤§é‡å¸¦å®½ï¼ˆè€—å°½ï¼‰</li></ul> <h4 id="syn-flood"><a href="#syn-flood" class="header-anchor">#</a> SYN Flood</h4> <p><img src="/assets/img/syn-flood.153423d4.png" alt="SYN Flood"></p> <h3 id="é˜²å¾¡ddos"><a href="#é˜²å¾¡ddos" class="header-anchor">#</a> é˜²å¾¡DDoS</h3> <ul><li>æµé‡æ²»ç†
<ul><li>è´Ÿè½½å‡è¡¡</li> <li>APIç½‘å…³</li> <li>CDN</li></ul></li> <li>å¿«é€Ÿè‡ªåŠ¨æ‰©å®¹</li> <li>éæ ¸å¿ƒæœåŠ¡é™çº§</li></ul> <h2 id="ä¼ è¾“å±‚æ”»å‡»"><a href="#ä¼ è¾“å±‚æ”»å‡»" class="header-anchor">#</a> ä¼ è¾“å±‚æ”»å‡»</h2> <h3 id="ä¸­é—´äººæ”»å‡»"><a href="#ä¸­é—´äººæ”»å‡»" class="header-anchor">#</a> ä¸­é—´äººæ”»å‡»</h3> <p><img src="/assets/img/middle.b7c0bc25.png" alt="ä¸­é—´äººæ”»å‡»">
åŸå› ï¼š</p> <ul><li>æ˜æ–‡ä¼ è¾“</li> <li>ä¿¡æ¯ç¯¡æ”¹ä¸å¯çŸ¥</li> <li>å¯¹æ–¹èº«ä»½æœªéªŒè¯</li></ul> <h3 id="é˜²å¾¡ä¸­é—´äºº"><a href="#é˜²å¾¡ä¸­é—´äºº" class="header-anchor">#</a> é˜²å¾¡ä¸­é—´äºº</h3> <p>HTTPS</p> <ul><li>å¯é æ€§ï¼šåŠ å¯†</li> <li>å®Œæ•´æ€§ï¼šMACéªŒè¯</li> <li>ä¸å¯æŠµèµ–æ€§ï¼šæ•°å­—ç­¾å</li></ul> <h4 id="tls-1-2"><a href="#tls-1-2" class="header-anchor">#</a> TLS 1.2</h4> <p><img src="/assets/img/tls.96dd4e79.png" alt="TLS 1.2"></p> <h4 id="httpså®Œæ•´æ€§"><a href="#httpså®Œæ•´æ€§" class="header-anchor">#</a> HTTPSå®Œæ•´æ€§</h4> <p>ä¼ è¾“å†…å®¹ï¼šåŠ å¯†ä¿¡æ¯ + åŠ å¯†ä¿¡æ¯_hash</p> <p>å¯¹hashå€¼è¿›è¡Œæ ¡éªŒ</p> <h4 id="æ•°å­—ç­¾å"><a href="#æ•°å­—ç­¾å" class="header-anchor">#</a> æ•°å­—ç­¾å</h4> <p>ç­¾åæ‰§è¡Œè€…æœ‰ä¸¤æ ·ä¸œè¥¿:</p> <ul><li>privateKey</li> <li>publicKey</li></ul> <p>ç§é’¥ + å†…å®¹ ---&gt; signature</p> <p>publicKey: åˆ¤æ–­ signatureæ˜¯å¦æ˜¯ä½¿ç”¨privateKeyç”Ÿæˆçš„</p> <p>æµè§ˆå™¨éªŒè¯è¯ä¹¦å’ŒCAï¼ˆCertificate Authority è¯ä¹¦æœºæ„ï¼‰çš„publicKeyã€‚</p> <blockquote><p>å½“ç­¾åç®—æ³•ä¸å¤Ÿå¥å£®çš„æ—¶å€™ï¼Œåˆå¯èƒ½ä¼šè¢«æš´åŠ›ç ´è§£ã€‚</p></blockquote> <h4 id="http-strict-transport-security-hsts"><a href="#http-strict-transport-security-hsts" class="header-anchor">#</a> HTTP Strict- -Transport- Security(HSTS)</h4> <p>HSTS æ˜¯ HTTP ä¸¥æ ¼ä¼ è¾“å®‰å…¨ï¼ˆHTTP Strict Transport Securityï¼‰ çš„ç¼©å†™ã€‚ è¿™æ˜¯ä¸€ç§ç½‘ç«™ç”¨æ¥å£°æ˜ä»–ä»¬åªèƒ½ä½¿ç”¨å®‰å…¨è¿æ¥ï¼ˆHTTPSï¼‰è®¿é—®çš„æ–¹æ³•ã€‚ å¦‚æœä¸€ä¸ªç½‘ç«™å£°æ˜äº† HSTS ç­–ç•¥ï¼Œæµè§ˆå™¨å¿…é¡»æ‹’ç»æ‰€æœ‰çš„ HTTP è¿æ¥å¹¶é˜»æ­¢ç”¨æˆ·æ¥å—ä¸å®‰å…¨çš„ SSL è¯ä¹¦ã€‚ ç›®å‰å¤§å¤šæ•°ä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒ HSTS (åªæœ‰ä¸€äº›ç§»åŠ¨æµè§ˆå™¨æ— æ³•ä½¿ç”¨å®ƒ)ã€‚</p> <h4 id="subresource-integrity-sri"><a href="#subresource-integrity-sri" class="header-anchor">#</a> Subresource Integrity(SRI)</h4> <p>é™æ€èµ„æºä¸€èˆ¬æ”¾åˆ°CDNï¼Œå¦‚æœCDNè¢«åŠ«æŒï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯”hashã€‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://example.com/app.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sha384-{some-hash-value}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>anonymous<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>éªŒè¯ä¼ªä»£ç </p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> remoteHash <span class="token operator">=</span> <span class="token function">hash</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>tagHash <span class="token operator">!=</span> remoteHash<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;wrong hash&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="feature-policy-permission-policy"><a href="#feature-policy-permission-policy" class="header-anchor">#</a> Feature Policy/Permission Policy</h4> <p>é™åˆ¶ä¸€ä¸ªæºï¼ˆé¡µé¢ï¼‰ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨å“ªäº›åŠŸèƒ½ï¼š</p> <ul><li>camera</li> <li>microphone</li> <li>autoplay</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">allow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="é˜…è¯»ææ–™"><a href="#é˜…è¯»ææ–™" class="header-anchor">#</a> é˜…è¯»ææ–™</h2> <ul><li><a href="https://aws.amazon.com/cn/shield/ddos-attack-protection/" target="_blank" rel="noopener noreferrer">DDoSæ”»å‡»æ˜¯ä»€ä¹ˆ_DDoSæ˜¯ä»€ä¹ˆ_DDoSäº‘é˜²å¾¡-AWSäº‘æœåŠ¡ (amazon.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/AngusFu/diary/issues/32" target="_blank" rel="noopener noreferrer">å…³äº Web å®‰å…¨çªç„¶æƒ³åˆ°çš„ Â· Issue #32 Â· AngusFu/diary (github.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://imnerd.org/samesite.html" target="_blank" rel="noopener noreferrer">SameSite é‚£äº›äº‹ | æ€¡çº¢é™¢è½ (imnerd.org)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.amazon.com/Web-Application-Security-Exploitation-Countermeasures/dp/1492053112/ref=sr_1_3?crid=3KZBER4W7Z6JF&amp;dchild=1&amp;keywords=web+security&amp;qid=1627822659&amp;sprefix=web+secu%2Caps%2C360&amp;sr=8-3" target="_blank" rel="noopener noreferrer">Amazon.com: Web Application Security: Exploitation and Countermeasures for Modern Web Applications: 9781492053118: Hoffman, Andrew: Books<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2021/8/25 03:35:48</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/blogs/basic/web-security.html#cross-site-scripting-xss" class="sidebar-link reco-side-cross-site-scripting-xss" data-v-b57cc07c>Cross-Site Scripting(XSS)</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#stored-xss" class="sidebar-link reco-side-stored-xss" data-v-b57cc07c>Stored XSS</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#reflected-xss" class="sidebar-link reco-side-reflected-xss" data-v-b57cc07c>Reflected XSS</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#dom-based-xss" class="sidebar-link reco-side-dom-based-xss" data-v-b57cc07c>DOM-based XSS</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#mutation-based-xss" class="sidebar-link reco-side-mutation-based-xss" data-v-b57cc07c>Mutation-based XSS</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#é˜²å¾¡xss" class="sidebar-link reco-side-é˜²å¾¡xss" data-v-b57cc07c>é˜²å¾¡XSS</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/basic/web-security.html#cross-site-request-forgery-csrf" class="sidebar-link reco-side-cross-site-request-forgery-csrf" data-v-b57cc07c>Cross-site request forgery(CSRF)</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#same-origin-policy" class="sidebar-link reco-side-same-origin-policy" data-v-b57cc07c>Same-origin Policy</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#content-security-policy-csp" class="sidebar-link reco-side-content-security-policy-csp" data-v-b57cc07c>Content Security Policy(CSP)</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#csrfçš„é˜²å¾¡" class="sidebar-link reco-side-csrfçš„é˜²å¾¡" data-v-b57cc07c>CSRFçš„é˜²å¾¡</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/basic/web-security.html#injection" class="sidebar-link reco-side-injection" data-v-b57cc07c>Injection</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#sql-injection" class="sidebar-link reco-side-sql-injection" data-v-b57cc07c>SQL Injection</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#injection-ä¸è‡³äº-sql" class="sidebar-link reco-side-injection-ä¸è‡³äº-sql" data-v-b57cc07c>Injection ä¸è‡³äº SQL</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#é˜²å¾¡injection" class="sidebar-link reco-side-é˜²å¾¡injection" data-v-b57cc07c>é˜²å¾¡Injection</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/basic/web-security.html#denial-of-service-dos" class="sidebar-link reco-side-denial-of-service-dos" data-v-b57cc07c>Denial of Service(DoS)</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#redos-åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„-dos" class="sidebar-link reco-side-redos-åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„-dos" data-v-b57cc07c>ReDoS: åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„ DoS</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#distributed-dos-ddos" class="sidebar-link reco-side-distributed-dos-ddos" data-v-b57cc07c>Distributed DoS(DDoS)</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#é˜²å¾¡ddos" class="sidebar-link reco-side-é˜²å¾¡ddos" data-v-b57cc07c>é˜²å¾¡DDoS</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/basic/web-security.html#ä¼ è¾“å±‚æ”»å‡»" class="sidebar-link reco-side-ä¼ è¾“å±‚æ”»å‡»" data-v-b57cc07c>ä¼ è¾“å±‚æ”»å‡»</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#ä¸­é—´äººæ”»å‡»" class="sidebar-link reco-side-ä¸­é—´äººæ”»å‡»" data-v-b57cc07c>ä¸­é—´äººæ”»å‡»</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/basic/web-security.html#é˜²å¾¡ä¸­é—´äºº" class="sidebar-link reco-side-é˜²å¾¡ä¸­é—´äºº" data-v-b57cc07c>é˜²å¾¡ä¸­é—´äºº</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/basic/web-security.html#é˜…è¯»ææ–™" class="sidebar-link reco-side-é˜…è¯»ææ–™" data-v-b57cc07c>é˜…è¯»ææ–™</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.919d6661.js" defer></script><script src="/assets/js/7.5aa8e1b9.js" defer></script><script src="/assets/js/2.46317bd9.js" defer></script><script src="/assets/js/1.57079a2a.js" defer></script><script src="/assets/js/31.f98198e9.js" defer></script>
  </body>
</html>
